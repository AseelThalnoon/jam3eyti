/* v2.1.1 */
:root{
  --bg:#0f172a; --fg:#e2e8f0; --muted:#94a3b8;
  --card:#0b1220; --panel:#111827; --panel-2:#0e1628; --border:#1f2937;
  --accent:#22c55e; --blue:#3b82f6; --danger:#ef4444; --ghost:#0b1424;
  --shadow:0 8px 24px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Naskh Arabic","IBM Plex Sans Arabic",Arial,sans-serif}

.app-bar{padding:16px;background:#0b1220;border-bottom:1px solid var(--border);
  position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand{display:flex;align-items:center;gap:12px}
.h1{margin:0;font-size:18px}
.container{max-width:980px;margin:16px auto;padding:0 16px}
.stack-0>*+*{margin-top:4px}.stack-1>*+*{margin-top:8px}.stack-2>*+*{margin-top:12px}.stack-3>*+*{margin-top:16px}.stack-4>*+*{margin-top:24px}
.hstack-8{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:var(--shadow)}
.h2{margin:0 0 8px;font-size:16px}
.title-row{display:flex;align-items:center;gap:8px}

label{display:flex;flex-direction:column;gap:8px;font-size:14px;color:var(--muted)}
input,select{padding:12px;border-radius:12px;border:1px solid var(--border);background:var(--panel);color:var(--fg);transition:transform .05s ease, box-shadow .15s ease}
input:focus,select:focus{outline:2px solid #1e293b;box-shadow:0 0 0 3px rgba(59,130,246,.15)}
small.hint{color:var(--muted);font-size:12px;min-height:16px;display:block}
.error{color:#fda4af;min-height:16px;font-size:12px}

.grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
@media (max-width:640px){.grid{grid-template-columns:1fr}}

.search{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--panel);color:var(--fg)}
.search.small{max-width:280px;padding:8px 10px;border-radius:10px}
.select.small{padding:8px 10px;border-radius:10px}

.btn{padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:var(--panel);color:#fff;cursor:pointer;font-weight:600;transition:transform .06s ease, box-shadow .15s ease, background-color .15s}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.primary{background:var(--accent);color:#08110a;border-color:transparent}
.btn.secondary{background:#3b82f6;color:#081018;border-color:transparent}
.btn.danger{background:#ef4444;color:#1b0707;border-color:transparent}
.btn.ghost{background:#0b1424;color:#cbd5e1}
.btn[disabled]{opacity:.55;cursor:not-allowed}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:10px;border:1px solid var(--border);background:var(--panel);color:#cbd5e1;cursor:pointer;transition:background-color .15s}
.icon-btn:hover{background:#0f1a2d}

.chips{display:flex;gap:6px}
.chip{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--panel);color:#cbd5e1;cursor:pointer}
.chip:hover{background:#0f1a2d}

.list{display:flex;flex-direction:column;gap:12px}
.list .item{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:12px;background:var(--panel);border:1px solid var(--border);border-radius:12px}
.item .meta{color:var(--muted);font-size:13px;display:flex;gap:8px;flex-wrap:wrap}

.table{width:100%;border-collapse:collapse}
.table th,.table td{border-top:1px solid var(--border);padding:10px;text-align:right;vertical-align:top}
.table thead th{color:var(--muted);font-weight:600}
.table tbody tr:nth-child(odd){background:#0f1a2d}
.table tbody tr:nth-child(even){background:#0d1728}
.table .badge{margin-inline-start:6px}

@media (max-width:720px){
  .table--cards thead{display:none}
  .table--cards tr{display:block;margin:12px 0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .table--cards td{display:flex;justify-content:space-between;gap:12px;padding:10px;border-top:1px solid var(--border)}
  .table--cards td:first-child{border-top:none}
  .table--cards td::before{content:attr(data-col);color:var(--muted)}
}
.row-accent{border-inline-start:4px solid #22c55e}

.details-header{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap}
.meta-line{color:#9ca3af;font-size:13px}
.details-header .meta{display:flex;gap:8px;color:var(--muted);font-size:13px;flex-wrap:wrap}
.badge{display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:var(--panel);font-size:12px;color:var(--muted)}
.badge.status{color:#a5f3fc;border-color:#164e63;background:#082f49}
.badge.subtle{background:var(--panel-2);color:#9ca3af}

.collapsible{border:1px solid var(--border);border-radius:12px;background:#0e1628}
.collapsible > summary{list-style:none;cursor:pointer;padding:12px;color:#d1d5db;display:flex;align-items:center;gap:8px;border-bottom:1px solid transparent;font-weight:800}
.collapsible[open] > summary{border-bottom-color:var(--border)}
.collapsible .content{padding:12px}
summary::-webkit-details-marker{display:none}
.caret::before{content:"▸";display:inline-block;transform:rotate(-90deg);transition:transform .15s}
details[open] > summary.caret::before{transform:rotate(0deg)}
.members-summary .spacer{flex:1}

.subtoolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
.sticky-sub{position:sticky;top:72px;background:#0e1628;padding:8px;border-radius:12px;border:1px solid var(--border);z-index:10}

.empty{text-align:center;color:var(--muted);padding:16px;border:1px dashed var(--border);border-radius:12px;background:#0b1424}
.pill{background:#0f2d1f;color:#a7f3d0;border:1px solid #14532d;padding:2px 8px;border-radius:999px;font-size:12px}

.footer{text-align:center;color:#94a3b8;padding:32px 0;font-size:13px}

/* حفظ */
.save-bar{display:flex;align-items:center;gap:8px;color:#93c5fd;background:#0b1424;border:1px solid var(--border);border-radius:10px;padding:8px}
.save-bar .dot{width:8px;height:8px;border-radius:50%;background:#22c55e;display:inline-block}

/* Toasts */
.toasts{position:fixed;inset-inline:12px;bottom:14px;display:flex;flex-direction:column;gap:8px;z-index:50}
.toast{background:#0e1628;border:1px solid var(--border);color:var(--fg);padding:12px;border-radius:12px;box-shadow:var(--shadow);font-size:14px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.toast .undo{background:transparent;border:1px dashed #64748b;color:#cbd5e1;padding:6px 10px;border-radius:8px;cursor:pointer}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;padding:16px;z-index:100}
.modal__card{width:min(720px,100%);background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;max-height:90vh}
.modal__head{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid var(--border)}
.modal__body{padding:16px;overflow:auto}
.modal__foot{display:flex;gap:12px;justify-content:flex-end;padding:16px;border-top:1px solid var(--border)}

.pay-grid{display:grid;grid-template-columns:1fr auto auto auto;gap:8px;align-items:center}
.pay-grid .cell{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:var(--panel)}
.pay-grid .month{font-weight:700}
.pay-grid input[type="number"]{width:110px}

/* زر + عائم للجوال */
.fab{
  position:fixed; inset-inline-end:16px; inset-block-end:88px;
  width:56px; height:56px; border-radius:50%; border:none; cursor:pointer;
  background:#22c55e; color:#0b1220; font-size:28px; line-height:56px;
  box-shadow:0 12px 24px rgba(0,0,0,.35); display:none; z-index:60;
}
@media (max-width:768px){ .fab{display:inline-block} }
.fab:disabled{opacity:.4;cursor:not-allowed}

/* Tiles */
.month-grid{
  display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px;
}
@media (max-width:900px){ .month-grid{grid-template-columns:repeat(2,1fr);} }
@media (max-width:520px){ .month-grid{grid-template-columns:1fr;} }

.month-tile{
  background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:12px;
  cursor:pointer; transition:transform .06s ease, box-shadow .15s ease;
}
.month-tile:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.25); }
.month-tile .row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.month-tile .label{font-weight:700}
.month-tile .muted{color:var(--muted);font-size:12px}
.progress{height:8px;border-radius:999px;background:#0b1424;border:1px solid var(--border);overflow:hidden;margin:8px 0}
.progress > span{display:block;height:100%;background:var(--accent)}
.kpis{display:flex;gap:8px;flex-wrap:wrap}
.kpis .badge{background:#0f1a2d;color:#a7f3d0;border-color:#14532d}

.month-details{margin-top:12px;padding:12px;border:1px solid var(--border);background:#0e1628;border-radius:12px}
.month-details .md-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.toggle{display:flex;align-items:center;gap:8px;color:var(--muted)}